# JapaneseChat-LC (v1.1.1)

Minecraftサーバーのチャットを日本語（ローマ字変換）にするプラグインです。
本リポジトリは [sya-ri/JapaneseChat](https://github.com/sya-ri/JapaneseChat) をベースに、LunaChat等のチャット管理プラグインと併用しやすくした改良版です。

---
### 🛠 v1.1.0 での変更・追加機能

* **数値が存在した差に変換されなくなるバグを削除** 
* **数値保護の削除**

### 🛠 v1.1.0 での変更・追加機能

* **二重変換の防止**: メッセージ内にひらがなや漢字が含まれている場合、変換処理を自動でスキップします。 これにより、手動で打った日本語がさらに変換されて文字化けするのを防ぎます。
* **カラーコードの維持**: `&b` や `§c` などの色指定コードを検出し、**装飾を保ったままメッセージ部分だけを日本語に変換**します。 LuckPerms等の役職カラーとも共存可能です。
* **特定の単語の保護**:
    * **数値・座標**: `-120.5 64 300` や `100lv` など、数字が含まれる単語を検知して半角のまま維持します。
    * **URL・笑対策**: `https://...` などのURLが「。」に化けたり、`www` が「っっｗ」になるのを防ぎます。
* **スキップ機能の強化**:
    * **全体スキップ**: 行頭に `$` を付けて送信すると、発言全体の変換を無効化します。
    * **部分スキップ**: `$apple$` のように単語を `$` で囲むことで、**文章の一部分だけを変換から除外**できます。
* **優先度の調整**: イベント優先度を `LOWEST` に変更し、他のチャットプラグインが処理を行う前に変換を完了させるようにしました。

---

### 📋 バージョン比較

| 機能 | 1.0.1 | **v1.1.0 (LC)** |
| :--- | :--- | :--- |
| **変換ロジック** | ローマ字・かな変換 | **単語ごとの変換判定を追加** |
| **数値・座標** | 標準的な全角変換 | **サーバー用数値（座標・単位）の保持** |
| **カラーコード** | 基本的な装飾サポート | **色コード維持と色漏れ防止** |
| **スキップ機能** | 行頭記号による一括除外 | **部分除外を含むマルチパターン対応** |
| **日本語検知** | 手動による切り替え | **既存日本語の自動検知・保護** |

---

### 📝 クレジット

* **オリジナル作成者**: [sya_ri](https://github.com/sya-ri/JapaneseChat)
* **LC版 開発・改変**: [ryoma_1125](https://github.com/ryoma-1125/JapaneseChat-LC)

### 開発環境 / 対応バージョン

* **言語**: Kotlin
* **前提プラグイン**: [LunaChat](https://github.com/ucchyocean/LunaChat) (推奨)
* **テスト済みバージョン**: 1.21.1 - 1.21.11 (Paper/Spigot)
